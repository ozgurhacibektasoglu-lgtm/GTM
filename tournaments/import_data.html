<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Import Data</title>
  <style>
    body { font-family: system-ui; padding: 20px; max-width: 1200px; margin: 0 auto; }
    textarea { width: 100%; min-height: 400px; padding: 15px; border: 2px solid #e5e7eb; border-radius: 8px; font-family: monospace; font-size: 12px; }
    button { padding: 12px 24px; margin: 10px 5px 10px 0; cursor: pointer; border: none; border-radius: 6px; font-size: 14px; font-weight: 600; }
    .primary { background: #0b6efd; color: white; }
    .success { background: #16a34a; color: white; }
    .danger { background: #dc2626; color: white; }
    .message { padding: 15px; border-radius: 8px; margin: 10px 0; display: none; }
    .message.success { background: #d1fae5; color: #065f46; display: block; }
    .message.error { background: #fee2e2; color: #991b1b; display: block; }
  </style>
</head>
<body>
  <h1>Import GTM Data to Localhost</h1>
  
  <p><strong>Instructions:</strong></p>
  <ol>
    <li>Paste the exported data in the textarea below</li>
    <li>Click "Import Data"</li>
    <li>Your data will be loaded into localhost:8080</li>
  </ol>

  <textarea id="import-data" placeholder="Paste exported data here..."></textarea>
  
  <div>
    <button class="primary" onclick="importData()">Import Data</button>
    <button class="danger" onclick="clearData()">Clear All Data</button>
  </div>

  <div id="message" class="message"></div>

  <h2>Current Data in Localhost</h2>
  <pre id="current-data" style="background: #f5f5f5; padding: 15px; overflow: auto; border-radius: 8px; max-height: 300px;"></pre>

  <script>
    function showCurrentData() {
      const allData = {};
      const keys = ['tournaments', 'players', 'courses', 'admittedPlayers', 'scores', 'categories', 'draws'];
      
      keys.forEach(key => {
        const value = localStorage.getItem(key);
        if (value) {
          try {
            allData[key] = JSON.parse(value);
          } catch (e) {
            allData[key] = value;
          }
        }
      });

      document.getElementById('current-data').textContent = JSON.stringify(allData, null, 2) || '{}';
    }

    function importData() {
      const input = document.getElementById('import-data').value.trim();
      const messageEl = document.getElementById('message');
      
      if (!input) {
        messageEl.className = 'message error';
        messageEl.textContent = '❌ Please paste data first';
        return;
      }

      try {
        const data = JSON.parse(input);
        
        // Import each key
        let imported = 0;
        Object.keys(data).forEach(key => {
          if (data[key]) {
            // Data[key] is already a JSON string, so just set it directly
            localStorage.setItem(key, data[key]);
            imported++;
          }
        });

        messageEl.className = 'message success';
        messageEl.textContent = `✅ Successfully imported ${imported} data keys!\n\nYou can now use the application at http://localhost:8080/`;
        
        showCurrentData();
        
        setTimeout(() => {
          if (confirm('Data imported! Would you like to go to the tournaments page now?')) {
            window.location.href = 'http://localhost:8080/tournaments/index.html';
          }
        }, 1000);
        
      } catch (e) {
        messageEl.className = 'message error';
        messageEl.textContent = '❌ Invalid data format. Error: ' + e.message;
      }
    }

    function clearData() {
      if (confirm('Clear ALL data from localhost storage?')) {
        localStorage.clear();
        alert('All data cleared!');
        showCurrentData();
      }
    }

    // Show current data on load
    showCurrentData();
  </script>
</body>
</html>
